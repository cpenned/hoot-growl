---
import { getCollection } from "astro:content";
import BaseHead from "../../components/BaseHead.astro";
import Header from "../../components/Header.astro";
// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
  const blogEntries = await getCollection("gm");
  return blogEntries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}
// 2. When it's time to render, you can get the entry directly from the prop
const { entry } = Astro.props;
---

<html lang="en">
  <head>
    <BaseHead
      title={`GM ${entry.data.name}`}
      description={`GM Archive for ${entry.data.name}`}
    />
  </head>

  <body class="bg-secondary-300">
    <Header />
    <main>
      <div class="grid grid-cols-12">
        <div
          class="md:col-span-4 md:col-start-5 md:col-end-9 col-span-10 col-start-2 col-end-12"
        >
          <div class="flex flex-col">
            <span class="italic">Games Run by</span>
            <span class="xxl">
              {entry.data.name}
            </span>
          </div>
          <p>Updated on {entry.data.updatedOn.toISOString().slice(0, 10)}</p>
          <ul>
            {
              Array.isArray(entry.data.campaigns) ? (
                entry.data.campaigns.map((campaign) => (
                  <li class="capitalize">
                    <a
                      href={`/campaigns/${campaign}`}
                      title={`View posts from "${campaign}"`}
                    >
                      {campaign.replace(/-/g, " ")}
                    </a>
                  </li>
                ))
              ) : (
                <li class="tag">No campaigns found.</li>
              )
            }
          </ul>
        </div>
      </div>
    </main>
  </body>
</html>
